<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>@cocotopia</title>
</head>
<body>
	<p> [ hello world ] </p>
	<a data-url="http://google.com">link</a>

	<section class="section__main">
			<div class="section__content">
					<h1>Conectando con la API de tiempo</h1>
					<h2>El tiempo en Málaga</h2>
					<div class="weather__block" id="js_w_temp"></div>
					<div class="weather__block" id="js_w_icon"></div>
			</div>
	</section>

<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>	
<script>

	var app = {};
	app.apikey = "8253ee7e45025695deca4098ceed1c02";
	//app.url = "http://api.openweathermap.org/data/2.5/weather?q=Malaga&amp;APPID=" + app.apikey + "&amp;units=metric";
	app.url = "http://api.openweathermap.org/data/2.5/weather?q=Malaga&APPID=" + app.apikey + "&units=metric";

	app.cargaDatos = function(){
		$.ajax({
		url: app.url,
			success: function( data ) {
				app.datos = data;
				app.procesaDatos();
			},
			error: function(){
				alert("¡Ups! No puedo obtener información de la API");
			}
		});
	}

	app.procesaDatos = function(){
		app.condicionNombre = app.datos.weather[0].main;
		app.temperatura = app.datos.main.temp, 10;
		var condicionIcono = app.datos.weather[0].icon;
		app.icono = app.obtenIcono( condicionIcono );
		app.muestra();
	}

	app.muestra = function(){
		$('#js_w_temp').append("&lt;p class='weather_temperature'&gt;" + app.temperatura + "º&lt;/p&gt;");
		$('#js_w_icon').append(" &lt;i class='wi " + app.icono + "'&gt;&lt;/i&gt;");
		$('#js_w_icon').append("&lt;p class='weather_name'&gt;" + app.condicionNombre.toUpperCase() + "&lt;/p&gt;");
	}

	app.obtenIcono = function( weatherIcon ) {
		var icon;
		switch( weatherIcon ){
			case "01d":
			case "01n":
				icon = "wi-day-sunny";
			break;
			case "02d":
			case "02n":
				icon = "wi-day-cloudy";
			break;
		}
		return icon;
	}

	app.cargaDatos();

	var link = document.querySelector('a');
	var instance;
	link.addEventListener('click', function(e){
		instance = window.open('','blank');
		e.preventDefault();
		var linkData = link.getAttribute('data-url');
		instance.location = linkData;
	});

</script>
</body>
</html>